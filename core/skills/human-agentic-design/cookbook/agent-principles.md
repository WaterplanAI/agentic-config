# Agent-Friendly Design Principles

Every prototype generated by this skill MUST enforce all 8 principles.

## 1. Semantic HTML First

Use native HTML elements for their intended purpose. Agents rely on element semantics to understand page structure.

```html
<!-- CORRECT -->
<button data-testid="submit-form">Submit</button>
<nav aria-label="Main navigation">...</nav>
<main>...</main>
<header>...</header>
<footer>...</footer>
<article>...</article>
<section aria-label="Features">...</section>

<!-- WRONG -->
<div onclick="submit()">Submit</div>
<div class="nav">...</div>
<div class="main-content">...</div>
```

Required landmarks: `<main>` (exactly one), `<header>`, `<footer>`, `<nav>`.

## 2. ARIA Only When Native HTML Insufficient

Prefer native HTML semantics. Add ARIA only for dynamic states or custom widgets.

```html
<!-- Native sufficient - no ARIA needed -->
<button>Close</button>
<input type="checkbox">

<!-- ARIA needed - dynamic state -->
<button aria-expanded="false" aria-controls="menu-panel">Menu</button>
<div id="menu-panel" role="region" aria-live="polite" hidden>...</div>

<!-- ARIA needed - icon-only button -->
<button aria-label="Close dialog"><svg>...</svg></button>

<!-- ARIA for validation -->
<input aria-invalid="true" aria-describedby="email-error">
<span id="email-error" role="alert">Invalid email format</span>
```

## 3. data-testid on All Interactive Elements

Every interactive element gets a semantic `data-testid`. Agents use these as stable selectors.

```html
<!-- Naming: <context>-<element-type> -->
<button data-testid="signup-submit">Sign Up</button>
<input data-testid="email-input" type="email">
<select data-testid="country-select">...</select>
<a data-testid="nav-home" href="/">Home</a>
<textarea data-testid="message-textarea">...</textarea>

<!-- WRONG - generic names -->
<button data-testid="btn1">Sign Up</button>
<input data-testid="field2" type="email">
```

## 4. URL-Driven State

Encode view state in URL search params so agents can deep-link and read state from URL.

```html
<script>
  // Read state from URL
  const params = new URLSearchParams(window.location.search);
  const view = params.get('view') || 'grid';
  const sort = params.get('sort') || 'date';
  const filter = params.get('filter') || 'all';
  const step = parseInt(params.get('step') || '1', 10);

  // Update URL without reload
  function updateState(key, value) {
    const url = new URL(window.location);
    url.searchParams.set(key, value);
    window.history.pushState({}, '', url);
  }
</script>
```

## 5. Command Palette / Keyboard-First

Future enhancement. For now, ensure all actions are keyboard-triggerable via tab navigation and visible focus indicators.

```html
<!-- All interactive elements must be focusable and have visible focus -->
<style>
  :focus-visible { outline: 2px solid #4f46e5; outline-offset: 2px; }
</style>

<!-- Modals: Escape to close, trap focus -->
<!-- Dropdowns: Arrow keys to navigate, Enter to select, Escape to close -->
```

## 6. JSON-LD Metadata

Include Schema.org structured data for agent parsing.

```html
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Page Title",
  "description": "Page description for agent context",
  "url": "http://localhost:8080",
  "mainEntity": {
    "@type": "ItemList",
    "numberOfItems": 5
  }
}
</script>
```

Adapt `@type` to page content: `WebPage`, `Article`, `CollectionPage`, `ItemList`, etc.

## 7. No Shadow DOM

All UI must be in the light DOM. Shadow DOM hides elements from accessibility trees and agent queries.

- No `attachShadow()` calls
- No `<template shadowrootmode>`
- No web components with closed shadow roots
- Custom elements OK only if they use light DOM

## 8. Explicit Label Associations

Every form input must have a programmatically associated label.

```html
<!-- Explicit for= association -->
<label for="email-input">Email Address</label>
<input id="email-input" data-testid="email-input" type="email">

<!-- Group related controls -->
<fieldset>
  <legend>Payment Method</legend>
  <label><input type="radio" name="payment" value="card"> Credit Card</label>
  <label><input type="radio" name="payment" value="paypal"> PayPal</label>
</fieldset>

<!-- Error association -->
<input id="password" aria-describedby="password-help password-error">
<span id="password-help">Min 8 characters</span>
<span id="password-error" role="alert" hidden>Password too short</span>
```
